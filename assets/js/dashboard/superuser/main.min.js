const vuetify=new Vuetify(vuetify_opts),api_url=ra_elite_usa_insurance_ajaxurl;Vue.component("downloadExcel",JsonExcel);let vm=new Vue({vuetify:vuetify,el:"#ra-elite-usa-insurance-container",data:{selectedItem:0,barAlert:!1,barTimeout:6e3,barMessage:"",table_loading:!1,logout_loading:!1,notifications_loading:!1,pdf_loading:!1,percent_loading_active:!1,percent_loading:!1,requests_table_loading:!1,attachments_table_loading:!1,manager_attachments_table_loading:!1,agent_attachments_table_loading:!1,manager_attachment_loading:!1,agent_attachment_loading:!1,information_requests_table_loading:!1,information_requests_loading:!1,quote_loading:!1,attachment_loading:!1,view_dialog:!1,edit_dialog:!1,delete_dialog:!1,alert:!1,alert_type:"",alert_message:"",quote_id:url_params.get("quotation_id"),affordable_care_act_valid:!0,personal_information_valid:!0,employment_information_valid:!0,espouse_information_valid:!0,espouse_employment_information_valid:!0,dependents_information_valid:!0,payment_information_valid:!0,affordable_care_act_effectiveness_date_modal:!1,personal_information_birthdate_modal:!1,personal_information_document_expiration_modal:!1,affordable_care_act_date_modal:!1,espouse_information_birthdate_modal:!1,espouse_information_document_expiration_modal:!1,dependent_birthdate_modal:!1,dependent_expires_modal:!1,payment_expiration_date_modal:!1,autopay_date_modal:!1,routes:routes,notifications:[],options:{general:[{text:"Yes",value:1},{text:"No",value:0}],coverage_type:["INDIVIDUAL","FAMILY","Archived"],status:["Processing","In tray","Approved"],marital_status:["MARRIED","SINGLE"],inmigration_status:["WORK PERMIT AUTHORIZATION","RESIDENT / GREEN CARD","OTHER"],work_type:["W2","1099"],payment_by:["PER HOUR","WEEKLY","BIWEEKLY","MONTHLY","YEARLY"],relative:["Child","Mother","Father","Other"],payment_type:["","BANK ACCOUNT","CREDIT OR DEBIT CARD"],account_type:["CHECKING","SAVING"],cards_type:["DEBIT","CREDIT"],cards_entity_type:["MASTER CARD","VISA","AMERICAN EXPRESS","DISCOVER"]},countries:countries,rules:{required:[v=>!!v||"This field is required"],name:[v=>!!v||"Name is required",v=>v&&v.length<=10||"Name must be more than 10 characters"],ucis:[v=>""!=!v||9==v.length||"You need to fill the 9 characters"],card_number:[v=>""!=!v||13==v.length||"You need to fill the 13 characters"],email:[v=>!!v||"E-mail is required",v=>/.+@.+\..+/.test(v)||"E-mail must be valid"]},modifications:{expanded:[],header:[{text:"Date",align:"center",value:"published_at"},{text:"Status",align:"center",value:"status"},{text:"Action",align:"center",value:"actions"}],items:[],content:""},attachments:{dialog:!1,delete_dialog:!1,upload_dialog:!1,header:[{text:"Date",align:"center",value:"published_at"},{text:"Name",align:"center",value:"post_title"},{text:"Status",align:"center",value:"status"},{text:"Action",align:"center",value:"actions"}],items:[],editedItem:{post_title:""},editedIndex:-1},manager_attachments:{dialog:!1,delete_dialog:!1,header:[{text:"Date",align:"center",value:"published_at"},{text:"Name",align:"center",value:"post_title"},{text:"Action",align:"center",value:"actions"}],items:[],editedItem:{post_title:""},editedIndex:-1},agent_attachments:{dialog:!1,delete_dialog:!1,header:[{text:"Date",align:"center",value:"published_at"},{text:"Name",align:"center",value:"post_title"},{text:"Action",align:"center",value:"actions"}],items:[],editedItem:{post_title:""},editedIndex:-1},information_requests:{dialog:!1,delete_dialog:!1,header:[{text:"Date",align:"center",value:"published_at"},{text:"Information",align:"center",value:"post_title"},{text:"Content",align:"center",value:"post_content"},{text:"Year",value:"year"},{text:"Type",value:"type"},{text:"Status",align:"center",value:"status"},{text:"Action",align:"center",value:"actions"}],items:[],editedItem:{post_title:"",post_content:""},editedIndex:-1},action_history:{dialog:!1,details_dialog:!1,loading:!1,headers:[{text:"Date",align:"center",value:"created_at"},{text:"Description",align:"center",value:"action_message"},{text:"Action",align:"center",value:"actions"}],items:[],editedItem:{},detail_items:[]},quotes:{search:"",excel:{header:{"Full Name":{field:"personal_information",callback:v=>`${v.first_name} ${v.middle_name} ${v.last_name}`},Birthdate:{field:"personal_information",callback:v=>moment(v.birthdate).format("MM/DD/YYYY")},Telephone:{field:"personal_information.telephone",callback:v=>`Tel:${v}`},Email:{field:"personal_information.email"},Agent:{field:"agent"},Year:{field:"year"},"Company / Plan":{field:"affordable_care_act.company_plan"},Income:{field:"personal_information.total_income",callback(v){let amount=v;if(typeof amount!==String){var formatter,money=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(amount);return"$NaN"==money||NaN===money?amount:money}return amount}},"Total Members":{callback:v=>(total="FAMILY"==v.affordable_care_act.coverage_type?2:1,total+=v.dependents.length,total)},Members:{callback:v=>(members="FAMILY"==v.affordable_care_act.coverage_type?`${v.espouse_information.first_name} ${v.espouse_information.middle_name} ${v.espouse_information.last_name}`:"",members.length>0&&parseInt(v.espouse_information.added)?members+=" (Apply)":members.length>0&&!parseInt(v.espouse_information.added)&&(members+=" (No Apply)"),v.dependents.length>0&&v.dependents.forEach(e=>{member_application=parseInt(e.added)?"(Apply)":"(No Apply)",members+=`\n${e.first_name} ${e.last_name} ${member_application}`}),members)}}},header:[{text:"ID",align:"start",value:"ID"},{text:"Date",align:"start",value:"published_at"},{text:"Applicant",align:"start",value:"applicant"},{text:"Agent",align:"start",value:"agent"},{text:"Year",value:"year"},{text:"Type",value:"type"},{text:"Status",value:"status"},{text:"Actions",value:"actions",align:"center",sortable:!1}],items:[],editedItem:{},editedIndex:-1}},computed:{formAttachmentTitle(){return-1===this.attachments.editedIndex?"New Document Attachment":"Edit Document Attachment"},formManagerAttachmentTitle(){return-1===this.manager_attachments.editedIndex?"New Document Attachment":"Edit Document Attachment"},formRequestInformationTitle(){return-1===this.information_requests.editedIndex?"New Information Request":"Edit Information Request"}},watch:{},created(){null===this.quote_id?this.initialize():this.initializeAndPrevisualize(),initNotifications(this),setInterval(initNotifications,3e4,this)},mounted(){},methods:{logout(){var app=this,url=api_url+"ra_elite_usa_insurance_logout";app.logout_loading=!0,app.$http.get(url).then(res=>{app.logout_loading=!1,window.location=res.body.redirect_url},err=>{app.logout_loading=!1})},initialize(){var app=this,url=api_url+"ra_elite_usa_insurance_get_quotes";app.table_loading=!0,app.$http.get(url).then(res=>{if(app.table_loading=!1,res.body.length>0){var items=[],item={};res.body.forEach(quote=>{var item=quote;item.published_at=moment(item.affordable_care_act.date).format("DD/MM/YYYY, h:mm:ss a"),item.applicant=item.personal_information.first_name+" "+item.personal_information.middle_name+" "+item.personal_information.last_name,item.type=item.post_parent<=0?"First-Time":"Renewal",item.personal_information.same_address=item.personal_information.hasOwnProperty("same_address")?item.personal_information.same_address:1,item.affordable_care_act.hasOwnProperty("renewal_date")?item.year=moment(item.affordable_care_act.renewal_date).format("YYYY"):item.year=moment(item.affordable_care_act.effectiveness_date).isSameOrAfter(moment(item.affordable_care_act.date))?moment(item.affordable_care_act.effectiveness_date).format("YYYY"):moment(item.affordable_care_act.date).format("YYYY"),items.push(item)}),app.quotes.items=items}},err=>{app.table_loading=!1})},initializeAndPrevisualize(){var app=this,url=api_url+"ra_elite_usa_insurance_get_quotes";app.table_loading=!0,app.$http.get(url).then(res=>{if(app.table_loading=!1,res.body.length>0){var items=[],item={},item;res.body.forEach(quote=>{var item=quote;item.published_at=item.affordable_care_act.date,item.applicant=item.personal_information.first_name+" "+item.personal_information.middle_name+" "+item.personal_information.last_name,item.personal_information.same_address=item.personal_information.hasOwnProperty("same_address")?item.personal_information.same_address:1,items.push(item)}),app.quotes.items=items,(item=app.quotes.items.filter(quote=>parseInt(quote.ID)==parseInt(app.quote_id))).length>0?(app.showItem(item[0]),app.getModificationRequests(),app.getInformationRequests(),app.getAttachmentsRequests(),app.getManagerAttachments(),app.getAgentAttachments()):(app.barAlert=!0,app.barMessage="The quote requested is not available")}},err=>{app.table_loading=!1})},generateQuotePDF(){var app=this,quote=app.quotes.editedItem,url=api_url+"ra_elite_usa_insurance_generate_quote_pdf";app.pdf_loading=!0,app.$http.post(url,quote).then(res=>{if("success"==res.body.status){app.pdf_loading=!1;var pdf_doc=res.body,a=document.createElement("a");a.href=pdf_doc.content,document.body.append(a),a.download=pdf_doc.applicant+".pdf",a.click(),a.remove()}},err=>{})},getModificationRequests(){var app=this;app.modifications.items=[];var quote_form=app.quotes.editedItem,url=api_url+"ra_elite_usa_insurance_get_quote_modification_requests",index=app.quotes.editedIndex,data={post_parent:quote_form.ID};app.requests_table_loading=!0,app.$http.post(url,data).then(res=>{app.requests_table_loading=!1;var items=[];res.body.length>0&&(items=res.body),app.modifications.items=items},err=>{})},getAttachmentsRequests(){var app=this;app.attachments.items=[];var quote_form=app.quotes.editedItem,url=api_url+"ra_elite_usa_insurance_get_quote_attachment_requests",index=app.quotes.editedIndex,data={post_parent:quote_form.ID};app.attachments_table_loading=!0,app.$http.post(url,data).then(res=>{app.attachments_table_loading=!1;var items=[];res.body.length>0&&(items=res.body),app.attachments.items=items},err=>{})},getManagerAttachments(){var app=this;app.manager_attachments.items=[];var quote_form=app.quotes.editedItem,url=api_url+"ra_elite_usa_insurance_get_quote_manager_attachments",data={post_parent:quote_form.ID};app.manager_attachments_table_loading=!0,app.$http.post(url,data).then(res=>{app.manager_attachments_table_loading=!1;var items=[];res.body.length>0&&(items=res.body),app.manager_attachments.items=items},err=>{})},getInformationRequests(){var app=this;app.information_requests.items=[];var quote_form=app.quotes.editedItem,url=api_url+"ra_elite_usa_insurance_get_quote_information_requests",data={post_parent:quote_form.ID};app.information_requests_table_loading=!0,app.$http.post(url,data).then(res=>{app.information_requests_table_loading=!1;var items=[];res.body.length>0&&(items=res.body),app.information_requests.items=items},err=>{})},getActionsHistory(quote){var app=this;app.action_history.items=[];var url=api_url+"ra_elite_usa_insurance_get_quote_action_history",data={ID:quote.ID};app.action_history.loading=!0,app.$http.post(url,data).then(res=>{app.action_history.loading=!1;var items=[];res.body.length>0&&res.body.forEach((e,i)=>{e.extra_info=JSON.parse(e.extra_info),"quote_doc_r"==e.extra_info.post_type&&e.extra_info.meta_input.attachment_url.includes("[")&&(e.extra_info.meta_input.attachment_url=JSON.parse(e.extra_info.meta_input.attachment_url))}),items=res.body,app.action_history.items=items},err=>{})},showActionDetails(item){var app,action_history=this.action_history;action_history.editedItem=Object.assign({},item),action_history.detail_items=[];var items=action_history.items.filter(e=>e.post_parent==action_history.editedItem.post_parent);action_history.detail_items=items,action_history.details_dialog=!0},getAgentAttachments(){var app=this;app.agent_attachments.items=[];var quote_form=app.quotes.editedItem,url=api_url+"ra_elite_usa_insurance_get_quote_agent_attachments",data={post_parent:quote_form.ID};app.agent_attachments_table_loading=!0,app.$http.post(url,data).then(res=>{app.agent_attachments_table_loading=!1;var items=[];res.body.length>0&&(items=res.body),app.agent_attachments.items=items},err=>{})},editAgentAttachmentItem(item){this.agent_attachments.editedIndex=this.agent_attachments.items.indexOf(item),this.agent_attachments.editedItem=Object.assign({},item),this.agent_attachments.dialog=!0},deleteAgentAttachmentItem(item){this.agent_attachments.editedIndex=this.agent_attachments.items.indexOf(item),this.agent_attachments.editedItem=Object.assign({},item),this.agent_attachments.delete_dialog=!0},closeAgentAttachment(){this.agent_attachments.dialog=!1,this.$nextTick(()=>{this.agent_attachments.editedItem=Object.assign({},{}),this.agent_attachments.editedIndex=-1})},saveManagerAttachment(){var app=this,attachment=app.agent_attachments.editedItem,url=api_url+"ra_elite_usa_insurance_save_quote_agent_attachment",index=app.agent_attachments.editedIndex,data=new FormData;attachment.hasOwnProperty("ID")&&null!=attachment.ID&&data.append("ID",attachment.ID),data.append("post_parent",app.quotes.editedItem.ID),data.append("agent",app.quotes.editedItem.post_author),data.append("post_title",attachment.post_title),null==attachment.doc&&""==attachment.doc||data.append("attachment",attachment.doc),attachment.hasOwnProperty("post_author")&&""!=attachment.post_author&&data.append("post_author",attachment.post_author),attachment.hasOwnProperty("attachment_id")&&""!=attachment.attachment_id&&data.append("attachment_id",attachment.attachment_id),attachment.hasOwnProperty("attachment_url")&&""!=attachment.attachment_url&&data.append("attachment_url",attachment.attachment_url),app.manager_attachment_loading=!0,app.$http.post(url,data,{progress(e){e.lengthComputable&&(app.percent_loading_active=!0,app.percent_loading=e.loaded/e.total*100)}}).then(res=>{app.manager_attachment_loading=!1,app.barAlert=!0,app.percent_loading_active=!1,app.percent_loading_active=0,res.body.hasOwnProperty("message")?(app.barMessage=res.body.message,"success"==res.body.status&&(attachment.hasOwnProperty("attachment_id")&&""!=attachment.attachment_id||(attachment.ID=res.body.data.ID,attachment.attachment_id=res.body.data.attachment_id,attachment.published_at=moment()),attachment.attachment_url=res.body.data.hasOwnProperty("attachment_url")?res.body.data.attachment_url:attachment.attachment_url,-1===index?app.agent_attachments.items.push(attachment):Object.assign(app.agent_attachments.items[index],attachment),app.agent_attachments.dialog=!1)):(app.alert_type="error",app.barMessage="There was an error")},err=>{app.manager_attachment_loading=!1,app.barAlert=!0,app.barMessage="There was an error, it can't be possible process the information sent"})},deleteAgentAttachment(){var app=this,attachment=app.agent_attachments.editedItem,url=api_url+"ra_elite_usa_insurance_delete_quote_manager_attachment",index=app.agent_attachments.editedIndex;app.$http.post(url,{ID:attachment.ID}).then(res=>{app.barAlert=!0,app.agent_attachments.delete_dialog=!1,res.body.hasOwnProperty("message")?(app.barMessage=res.body.message,"success"==res.body.status&&app.agent_attachments.items.splice(index,1)):(app.alert_type="error",app.barMessage="There was an error")},err=>{app.agent_attachments.delete_dialog=!1,app.barAlert=!0,app.barMessage="There was an error, it can't be possible process the information sent"})},checkStatusColor(status){switch(status){case"Processing":return"warning";case"Approved":return"green";case"In tray":return"primary";default:return"grey darken-2"}},showItem(item){this.quotes.editedIndex=this.quotes.items.indexOf(item),this.quotes.editedItem=Object.assign({},item),this.view_dialog=!0},editItem(item){this.quotes.editedIndex=this.quotes.items.indexOf(item),this.quotes.editedItem=Object.assign({},item),this.edit_dialog=!0},editManagerAttachmentItem(item){this.manager_attachments.editedIndex=this.manager_attachments.items.indexOf(item),this.manager_attachments.editedItem=Object.assign({},item),this.manager_attachments.dialog=!0},editInformationRequestItem(item){this.information_requests.editedIndex=this.information_requests.items.indexOf(item),this.information_requests.editedItem=Object.assign({},item),this.information_requests.dialog=!0},editAttachmentItem(item){this.attachments.editedIndex=this.attachments.items.indexOf(item),this.attachments.editedItem=Object.assign({},item),this.attachments.dialog=!0},editUploadAttachmentItem(item){this.attachments.editedIndex=this.attachments.items.indexOf(item),this.attachments.editedItem=Object.assign({},item),this.attachments.upload_dialog=!0},deleteItem(item){this.quotes.editedIndex=this.quotes.items.indexOf(item),this.quotes.editedItem=Object.assign({},item),this.delete_dialog=!0},deleteDocumentItem(item){this.attachments.editedIndex=this.attachments.items.indexOf(item),this.attachments.editedItem=Object.assign({},item),this.attachments.delete_dialog=!0},deleteManagerAttachmentItem(item){this.manager_attachments.editedIndex=this.manager_attachments.items.indexOf(item),this.manager_attachments.editedItem=Object.assign({},item),this.manager_attachments.delete_dialog=!0},deleteInformationRequestItem(item){this.information_requests.editedIndex=this.information_requests.items.indexOf(item),this.information_requests.editedItem=Object.assign({},item),this.information_requests.delete_dialog=!0},markAgentAttachmentAsSeen(item){var app=this,url=api_url+"ra_elite_usa_insurance_mark_seen_quote_agent_attachment";0==item.status?app.$http.post(url,item).then(res=>{"success"==res.body.status&&(item.status=1),app.download([item.attachment_url])},err=>{}):app.download([item.attachment_url])},closeView(){this.view_dialog=!1,this.$nextTick(()=>{this.quotes.editedItem=Object.assign({},{}),this.quotes.editedIndex=-1})},closeAttachment(){this.attachments.dialog=!1,this.$nextTick(()=>{this.attachments.editedItem=Object.assign({},{}),this.attachments.editedIndex=-1})},closeManagerAttachment(){this.manager_attachments.dialog=!1,this.$nextTick(()=>{this.manager_attachments.editedItem=Object.assign({},{}),this.manager_attachments.editedIndex=-1})},closeInformationRequest(){this.information_requests.dialog=!1,this.$nextTick(()=>{this.information_requests.editedItem=Object.assign({},{}),this.information_requests.editedIndex=-1})},closeUploadAttachment(){this.attachments.upload_dialog=!1,this.$nextTick(()=>{this.attachments.editedItem=Object.assign({},{}),this.attachments.editedIndex=-1})},closeUploadInformationRequest(){this.information_requests.upload_dialog=!1,this.$nextTick(()=>{this.information_requests.editedItem=Object.assign({},{}),this.information_requests.editedIndex=-1})},closeEdit(){this.edit_dialog=!1,this.view_dialog||this.$nextTick(()=>{this.quotes.editedItem=Object.assign({},{}),this.quotes.editedIndex=-1})},closeDelete(){this.delete_dialog=!1,this.$nextTick(()=>{this.quotes.editedItem=Object.assign({},{}),this.quotes.editedIndex=-1})},closeAttachmentDelete(){this.attachments.delete_dialog=!1,this.$nextTick(()=>{this.attachments.editedItem=Object.assign({},{}),this.attachments.editedIndex=-1})},closeInformationRequestDelete(){this.information_requests.delete_dialog=!1,this.$nextTick(()=>{this.information_requests.editedItem=Object.assign({},{}),this.information_requests.editedIndex=-1})},getAge(form){var app=this,age=moment().diff(app.quotes.editedItem[form].birthdate,"years");return app.quotes.editedItem[form].age=age,age},calcTotalIncome(){var app=this,form=app.quotes.editedItem,personal_income,espouse_income,total_income=("string"==typeof form.employment_information.income?app.numberFormat(form.employment_information.income):parseInt(form.employment_information.income))+("string"==typeof form.espouse_employment_information.income?app.numberFormat(form.espouse_employment_information.income):parseInt(form.espouse_employment_information.income));return form.personal_information.total_income=app.currencyFormat(total_income,!0),form.personal_information.total_income},addDependent(){var app,item={added:0,gender:"",first_name:"",last_name:"",birthdate:"",relative:"",is_citizen:0,ssn:"",inmigration_status:"",uscis_number:"",card_number:"",document_from:"",document_expires:""};this.quotes.editedItem.dependents.push(item)},inputRelative:dependent=>"Other"!=dependent.relative_selected?(dependent.relative=dependent.relative_selected,!0):(dependent.relative="",!1),inputOtherIS:(status,form)=>"OTHER"!=status?(form.inmigration_status_selected=form.inmigration_status,!0):(form.inmigration_status_selected="",!1),removeDependent(index){var app;this.quotes.editedItem.dependents.splice(index,1)},updateQuoteForm(){var app=this,quote_form=app.quotes.editedItem,url=api_url+"ra_elite_usa_insurance_save_quote_form",index=app.quotes.editedIndex;app.quote_loading=!0,app.$http.post(url,quote_form).then(res=>{app.quote_loading=!1,app.barAlert=!0,res.body.hasOwnProperty("message")?(app.barMessage=res.body.message,"success"==res.body.status&&(Object.assign(app.quotes.items[index],quote_form),app.edit_dialog=!1)):(app.alert_type="error",app.barMessage="There was an error")},err=>{app.quote_loading=!1,app.barAlert=!0,app.barMessage="There was an error, it can't be possible process the information sent"})},saveAttachmentRequest(){var app=this,attachment=app.attachments.editedItem,url=api_url+"ra_elite_usa_insurance_save_quote_information_request",index=app.attachments.editedIndex;attachment.post_parent=app.quotes.editedItem.ID,attachment.post_author=app.quotes.editedItem.post_author,app.attachment_loading=!0,app.$http.post(url,attachment).then(res=>{app.attachment_loading=!1,app.barAlert=!0,res.body.hasOwnProperty("message")?(app.barMessage=res.body.message,"success"==res.body.status&&(-1==index?(attachment.ID=res.body.data,attachment.attachment_url="",attachment.attachment_id="",app.attachments.items.push(attachment)):Object.assign(app.attachments.items[index],attachment),app.attachments.dialog=!1)):(app.alert_type="error",app.barMessage="There was an error")},err=>{app.attachment_loading=!1,app.barAlert=!0,app.barMessage="There was an error, it can't be possible process the information sent"})},saveInformationRequest(){var app=this,information=app.information_requests.editedItem,url=api_url+"ra_elite_usa_insurance_save_quote_information_request",index=app.information_requests.editedIndex;information.post_parent=app.quotes.editedItem.ID,information.post_author=app.quotes.editedItem.post_author,app.information_requests_loading=!0,app.$http.post(url,information).then(res=>{app.information_requests_loading=!1,app.barAlert=!0,res.body.hasOwnProperty("message")?(app.barMessage=res.body.message,"success"==res.body.status&&(-1==index?(information.ID=res.body.data,information.status=0,app.information_requests.items.push(information)):Object.assign(app.information_requests.items[index],information),app.closeInformationRequest())):(app.alert_type="error",app.barMessage="There was an error")},err=>{app.information_requests_loading=!1,app.barAlert=!0,app.barMessage="There was an error, it can't be possible process the information sent"})},saveManagerAttachment(){var app=this,attachment=app.manager_attachments.editedItem,url=api_url+"ra_elite_usa_insurance_save_quote_manager_attachment",index=app.manager_attachments.editedIndex,data=new FormData;attachment.hasOwnProperty("ID")&&null!=attachment.ID&&data.append("ID",attachment.ID),data.append("post_parent",app.quotes.editedItem.ID),data.append("agent",app.quotes.editedItem.post_author),data.append("post_title",attachment.post_title),null==attachment.doc&&""==attachment.doc||data.append("attachment",attachment.doc),attachment.hasOwnProperty("post_author")&&""!=attachment.post_author&&data.append("post_author",attachment.post_author),attachment.hasOwnProperty("attachment_id")&&""!=attachment.attachment_id&&data.append("attachment_id",attachment.attachment_id),attachment.hasOwnProperty("attachment_url")&&""!=attachment.attachment_url&&data.append("attachment_url",attachment.attachment_url),app.manager_attachment_loading=!0,app.$http.post(url,data,{progress(e){e.lengthComputable&&(app.percent_loading_active=!0,app.percent_loading=e.loaded/e.total*100)}}).then(res=>{app.manager_attachment_loading=!1,app.barAlert=!0,app.percent_loading_active=!1,app.percent_loading_active=0,res.body.hasOwnProperty("message")?(app.barMessage=res.body.message,"success"==res.body.status&&(attachment.hasOwnProperty("attachment_id")&&""!=attachment.attachment_id||(attachment.ID=res.body.data.ID,attachment.attachment_id=res.body.data.attachment_id,attachment.published_at=moment()),attachment.attachment_url=res.body.data.hasOwnProperty("attachment_url")?res.body.data.attachment_url:attachment.attachment_url,-1===index?app.manager_attachments.items.push(attachment):Object.assign(app.manager_attachments.items[index],attachment),app.manager_attachments.dialog=!1)):(app.alert_type="error",app.barMessage="There was an error")},err=>{app.manager_attachment_loading=!1,app.barAlert=!0,app.barMessage="There was an error, it can't be possible process the information sent"})},closeAttachment(){this.attachments.dialog=!1,this.$nextTick(()=>{this.attachments.editedItem=Object.assign({},{file:""}),this.attachments.editedIndex=-1})},updateAttachmentName(item){var app=this,attachment=item,url=api_url+"ra_elite_usa_insurance_save_quote_attachment_request",index=app.attachments.items.indexOf(item);attachment.post_parent=app.quotes.editedItem.ID,attachment.post_author=app.quotes.editedItem.post_author,app.$http.post(url,attachment).then(res=>{app.barAlert=!0,res.body.hasOwnProperty("message")?(app.barMessage=res.body.message,"success"==res.body.status&&(app.$refs.attachment_edit_dialog.save(),app.attachments.dialog=!1)):(app.alert_type="error",app.barMessage="There was an error")},err=>{app.attachment_loading=!1,app.barAlert=!0,app.barMessage="There was an error, it can't be possible process the information sent"})},updateInformationTitle(item){var app=this,information=item,url=api_url+"ra_elite_usa_insurance_save_quote_information_request",index=app.information_requests.items.indexOf(item);information.post_parent=app.quotes.editedItem.ID,information.post_author=app.quotes.editedItem.post_author,app.$http.post(url,information).then(res=>{app.barAlert=!0,res.body.hasOwnProperty("message")?(app.barMessage=res.body.message,"success"==res.body.status&&(app.$refs.information_request_edit_dialog.save(),app.information_requests.dialog=!1)):(app.alert_type="error",app.barMessage="There was an error")},err=>{app.attachment_loading=!1,app.barAlert=!0,app.barMessage="There was an error, it can't be possible process the information sent"})},approveModification(item){var app=this,url=api_url+"ra_elite_usa_insurance_approve_form_modification_request";app.quote_loading=!0,app.$http.post(url,item).then(res=>{app.quote_loading=!1,app.barAlert=!0,res.body.hasOwnProperty("message")?(app.barMessage=res.body.message,"success"==res.body.status&&(item.status=1)):(app.alert_type="error",app.barMessage="There was an error")},err=>{app.quote_loading=!1,app.barAlert=!0,app.barMessage="There was an error, it can't be possible process the information sent"})},approveInformation(item){var app=this,url=api_url+"ra_elite_usa_insurance_approve_form_information_request";app.quote_loading=!0,app.$http.post(url,item).then(res=>{app.quote_loading=!1,app.barAlert=!0,res.body.hasOwnProperty("message")?(app.barMessage=res.body.message,"success"==res.body.status&&(item.status=1)):(app.alert_type="error",app.barMessage="There was an error")},err=>{app.quote_loading=!1,app.barAlert=!0,app.barMessage="There was an error, it can't be possible process the information sent"})},approveDocumentRequested(item){var app=this,url=api_url+"ra_elite_usa_insurance_approve_form_document_requested";app.$http.post(url,item).then(res=>{app.barAlert=!0,res.body.hasOwnProperty("message")?(app.barMessage=res.body.message,"success"==res.body.status&&(item.status=1)):(app.alert_type="error",app.barMessage="There was an error")},err=>{app.barAlert=!0,app.barMessage="There was an error, it can't be possible process the information sent"})},markAsProcessingDocumentRequested(item){var app=this,url=api_url+"ra_elite_usa_insurance_process_form_document_requested";app.$http.post(url,item).then(res=>{app.barAlert=!0,res.body.hasOwnProperty("message")?(app.barMessage=res.body.message,"success"==res.body.status&&(item.status=3)):(app.alert_type="error",app.barMessage="There was an error")},err=>{app.barAlert=!0,app.barMessage="There was an error, it can't be possible process the information sent"})},deleteQuoteForm({action:action="archive",post_status:post_status="trash",status:status="Archived"}){var app=this,quote_form=app.quotes.editedItem,url=api_url+`ra_elite_usa_insurance_${action}_quote`,index=app.quotes.editedIndex;app.$http.post(url,{ID:quote_form.ID}).then(res=>{app.barAlert=!0,app.delete_dialog=!1,res.body.hasOwnProperty("message")?(app.barMessage=res.body.message,"success"==res.body.status&&(app.quotes.items[index].post_status=post_status,app.quotes.items[index].status=status)):(app.alert_type="error",app.barMessage="There was an error")},err=>{app.delete_dialog=!1,app.barAlert=!0,app.barMessage="There was an error, it can't be possible process the information sent"})},deleteDocumentRequested(){var app=this,attachment=app.attachments.editedItem,url=api_url+"ra_elite_usa_insurance_delete_quote_attachment_requested",index=app.attachments.editedIndex;app.$http.post(url,{ID:attachment.ID}).then(res=>{app.barAlert=!0,app.attachments.delete_dialog=!1,res.body.hasOwnProperty("message")?(app.barMessage=res.body.message,"success"==res.body.status&&app.attachments.items.splice(index,1)):(app.alert_type="error",app.barMessage="There was an error")},err=>{app.attachments.delete_dialog=!1,app.barAlert=!0,app.barMessage="There was an error, it can't be possible process the information sent"})},deleteManagerAttachment(){var app=this,attachment=app.manager_attachments.editedItem,url=api_url+"ra_elite_usa_insurance_delete_quote_manager_attachment",index=app.manager_attachments.editedIndex;app.$http.post(url,{ID:attachment.ID}).then(res=>{app.barAlert=!0,app.manager_attachments.delete_dialog=!1,res.body.hasOwnProperty("message")?(app.barMessage=res.body.message,"success"==res.body.status&&app.manager_attachments.items.splice(index,1)):(app.alert_type="error",app.barMessage="There was an error")},err=>{app.manager_attachments.delete_dialog=!1,app.barAlert=!0,app.barMessage="There was an error, it can't be possible process the information sent"})},deleteInformationRequest(){var app=this,attachment=app.information_requests.editedItem,url=api_url+"ra_elite_usa_insurance_delete_quote_information_request",index=app.information_requests.editedIndex;app.$http.post(url,{ID:attachment.ID}).then(res=>{app.barAlert=!0,app.information_requests.delete_dialog=!1,res.body.hasOwnProperty("message")?(app.barMessage=res.body.message,"success"==res.body.status&&app.information_requests.items.splice(index,1)):(app.alert_type="error",app.barMessage="There was an error")},err=>{app.manager_attachments.delete_dialog=!1,app.barAlert=!0,app.barMessage="There was an error, it can't be possible process the information sent"})},uploadAttachment(){var app=this,attachment=app.attachments.editedItem,url=api_url+"ra_elite_usa_insurance_upload_quote_attachment_requested",index=app.attachments.editedIndex,data=new FormData;data.append("ID",attachment.ID),data.append("post_title",attachment.post_title),data.append("post_author",attachment.post_author),data.append("agent",app.quotes.editedItem.affordable_care_act.agent_name),""!=attachment.attachment_id&&data.append("attachment_id",attachment.attachment_id),attachment.doc.forEach((doc,i)=>{data.append("attachment["+i+"]",doc)}),app.attachment_loading=!0,app.$http.post(url,data,{progress(e){e.lengthComputable&&(app.percent_loading_active=!0,app.percent_loading=e.loaded/e.total*100)}}).then(res=>{app.attachment_loading=!1,app.barAlert=!0,app.percent_loading_active=!1,app.percent_loading_active=0,res.body.hasOwnProperty("message")?(app.barMessage=res.body.message,"success"==res.body.status&&(attachment.status=1,""==attachment.attachment_id&&(attachment.attachment_id=res.body.data.attachment_id),attachment.attachment_url=res.body.data.attachment_url,Object.assign(app.attachments.items[index],attachment),app.attachments.dialog=!1)):(app.alert_type="error",app.barMessage="There was an error")},err=>{app.attachment_loading=!1,app.barAlert=!0,app.barMessage="There was an error, it can't be possible process the information sent"})},uploadInformationRequest(){var app=this,information=app.information_requests.editedItem,url=api_url+"ra_elite_usa_insurance_upload_quote_information_requested",index=app.information_requests.editedIndex,data=new FormData;app.information_requests_loading=!0,app.$http.post(url,data).then(res=>{app.information_requests_loading=!1,app.barAlert=!0,res.body.hasOwnProperty("message")?(app.barMessage=res.body.message,"success"==res.body.status&&(information.status=2,Object.assign(app.information_requests.items[index],information),app.information_requests.dialog=!1)):(app.alert_type="error",app.barMessage="There was an error")},err=>{app.attachment_loading=!1,app.barAlert=!0,app.barMessage="There was an error, it can't be possible process the information sent"})},currencyFormat(amount,show_prefix){if("string"!=typeof amount){var formatter,money=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(amount);return show_prefix||(money=money.split("$")[1]),"$NaN"==money||NaN===money?show_prefix?"$"+amount:amount:money}return amount},numberFormat:amount=>Number(amount.replace(/[^0-9.-]+/g,"")),getFormatDate:d=>""==d?"":moment(d).format("MM/DD/YYYY"),getFormatDateShort:d=>""==d?"":moment(d).format("MM/YYYY"),getFormatDateExtended:d=>""==d?"":moment(d).format("MM/DD/YYYY, h:mm:ss a"),countStatus(status){return""==status?this.quotes.items.length:this.quotes.items.filter((e,i)=>e.status==status).length;var items},filterQuotes(id){var app=this,item=app.quotes.items.filter(quote=>parseInt(quote.ID)==parseInt(id));item.length>0?(app.showItem(item[0]),app.getModificationRequests(),app.getInformationRequests(),app.getAttachmentsRequests(),app.getManagerAttachments(),app.getAgentAttachments()):(app.barAlert=!0,app.barMessage="The quote requested is not available")}}});